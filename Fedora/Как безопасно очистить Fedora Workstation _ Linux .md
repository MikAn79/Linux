[Linux FAQ](https://linux-faq.ru/)

- [Главная страница](https://linux-faq.ru/index.php)
- [Новости](https://linux-faq.ru/news.php)
- [Дистрибутивы](https://linux-faq.ru/page.php)
- [Команды](https://linux-faq.ru/page/komandy-linux)
- [Разработка приложений](https://linux-faq.ru/page/razrabotka-prilojeniy-dlya-linux)
- [Обратная связь](https://linux-faq.ru/contact.php)

## Как безопасно очистить Fedora Workstation

- [](https://linux-faq.ru/)
- Как безопасно очистить Fedora Workstation

Рассмотрим несколько действенных советов по очистке Fedora Workstation.

Во-первых: никогда не используйте приложения для очистки системы, такие, как Bleachbit! В случае их использования операционная система может быть выведена из строя без возможности последующего восстановления. Но существует и несколько безопасных действий, которые будут описаны ниже.

При длительной работе с Fedora Workstation может накопиться небольшое количество неиспользуемых файлов. При этом вам не потребуется выполнять такие операции, как дефрагментация файловой системы. Типы операций, направленных на очистку системы Fedora Workstation от неиспользуемых файлов, описаны ниже.

### 1\. Очистка корзины

Возможно, это действие и является слишком очевидным, но о нем все же следует упомянуть: не забывайте осуществлять очистку корзины время от времени. Для очистки корзины следует открыть файловый менеджер, нажав на кнопку **«Обзор»** на верхней панели, введя запрос **«файлы»** в поле поиска в верхней части экрана и выбрав первое предложенное приложение **«Файлы»**, после чего использовать правую кнопку мыши для открытия контекстного меню пиктограммы корзины в боковой панели файлового менеджера и выбрать пункт меню **«Очистить корзину»**.

### 2\. Очистка кэша менеджера обновлений

Для начала следует нажать на кнопку **«Обзор»** на верхней панели, ввести запрос **«терминал»** в поле поиска в верхней части экрана и выбрать первое предложенное приложение **«Терминал»**. Начнем с менеджера пакетов DNF, который используется для установки обновлений дистрибутива. Для очистки его кэша нужно выполнить следующую команду с помощью терминала:

`sudo dnf clean all`

После окончания ввода команды следует нажать клавишу **Enter**. При запросе пароля вы должны будете ввести свой пароль. Символы вашего пароля не будут отображаться никоим образом, даже с помощью точек, и это нормально. После ввода пароля следует снова нажать клавишу **Enter**.

Помимо менеджера пакетов DNF в Fedora Workstation для автоматической загрузки и установки обновлений используется еще один системный компонент под названием PackageKit, причем он удаляет ненужные пакеты время от времени, поэтому есть смысл очистить и его кэш. Для очистки его кэша достаточно выполнить с помощью терминала следующую команду:

`sudo pkcon refresh force`

После окончания ввода команды также следует нажать клавишу **Enter**.

### 3\. Очистка кэша миниатюр

Fedora Workstation автоматически генерирует миниатюры для файлов изображений или видео, которые впоследствии используются в файловом менеджере. Сгенерированные миниатюры хранятся в скрытой поддиректории домашней директории пользователя (имена скрытых директорий и файлов начинаются с символа точки, например, **.cache** или **.bash_history**. Именно символ точки в имени делает их скрытыми).

Со временем общий объем миниатюр может значительно увеличиться, достигнув 512 МБ. Более того, кэш миниатюр может содержать большое количество миниатюр для уже не существующих файлов. По умолчанию автоматически удаляются лишь те миниатюры, которые были созданы более чем шесть месяцев назад.

Самый быстрый способ очистки кэша миниатюр связан с использованием терминала. Разумеется, вначале вам придется открыть новое окно терминала, нажав на кнопку **«Обзор»** на верхней панели, введя запрос **«терминал»** в поле поиска в верхней части экрана и выбрав первое предложенное приложение **«Терминал»**. После этого следует ввести в это окно следующую команду (используйте функции копирования/вставки для того, чтобы избежать ошибок; команда записывается в одну строку):

`rm -v -f ~/.cache/thumbnails/*/*.png ~/.thumbnails/*/*.png`

По окончании ввода команды необходимо нажать клавишу **Enter** для ее исполнения.

Далее следует ввести еще одну команду:

`rm -v -f ~/.cache/thumbnails/*/*/*.png ~/.thumbnails/*/*/*.png`

И снова по окончании ввода команды следует нажать клавишу **Enter** для ее исполнения.

Вам придется повторить описанные действия для всех учетных записей пользователей.

Желаете изменить настройки механизма генерации миниатюр, сократив их максимальный объем и время хранения? В таком случае вам придется выполнить описанные ниже действия.

Во-первых, вам придется установить Редактор dconf. Для этого необходимо ввести в окно терминала следующую команду:

`sudo dnf install dconf-editor`

После окончания ввода команды следует нажать клавишу **Enter**. При запросе пароля вы должны будете ввести свой пароль. Символы вашего пароля не будут отображаться никоим образом, даже с помощью точек, и это нормально. После ввода пароля следует снова нажать клавишу **Enter**.

Для согласия с установкой пакета следует использовать клавишу **Y**.

После этого следует нажать на кнопку **«Обзор»** на верхней панели, ввести запрос **«dconf»** в поле поиска в верхней части экрана и выбрать первое предложенное приложение **«Редактор dconf»**. Сразу же после запуска приложение предупредит вас о необходимости выполнения лишь обдуманных действий; вам нужно просто нажать на единственную доступную кнопку **«I'll be careful.»**. Теперь следует осуществить переход в рамках иерархического представления параметров конфигурации системы Редактора dconf: **«org — gnome — desktop — thumbnail-cache»**. После этого следует нажать на значение параметра **«maximum-age»**, отключить переключатель **«Use default value»** и ввести в ставшее активным поле ввода **«Custom value»** значение **30** (в качестве примера использовано максимальное время хранения миниатюр, равное 30 дням; вы же можете задать любое желаемое значение времени хранения миниатюр). Далее следует нажать на строку **«thumbnail-cache»** в заголовке окна, нажать на значение параметра **«maximum-size»** отключить переключатель **«Use default value»** и ввести в ставшее активным поле ввода **«Custom value»** значение **50** (в качестве примера использован максимальный размер кэша миниатюр, равный 50 МБ; вы же можете задать любое желаемое значение максимального размера кэша миниатюр).

### 4\. Реестр

Нет никакой необходимости в очистке реестра в Linux, так как он в принципе не может заполниться большим количеством ненужных данных. Это происходит по следующим причинам:

- Центральный реестр (DConf) используется лишь компонентами окружения рабочего стола GNOME. Большая часть приложений хранит свои конфигурационные данные вне этого реестра и по этой причине не работает с ним. Исходя из этого, большая часть приложений просто не может нарушить его работу. Приложения хранят свои конфигурационные данные в специальных файлах в директориях пользователей.
- Многие приложения сразу же после установки создают скрытые конфигурационные файлы в пользовательских директориях. Эти файлы являются единственными файлами для хранения конфигурационных данных приложений, к которым пользователи имеют доступ в том числе на запись. Данный подход схож с подходом, который использовался во времена MS-DOS, когда каждое приложение создавало свой собственный файл с расширением .ini для хранения  конфигурационных данных.
- Каждый пользователь имеет свою собственную скрытую копию центрального реестра в своей домашней директории. Эта копия является единственной точкой отказа, причем в случае ее повреждения учетные записи других пользователей никоим образом не пострадают.

### 5\. Активация механизма автоматической очистки хранилищ данных веб-браузера Firefox при завершении его работы

Вы можете улучшить безопасность своей системы и одновременно освободить немного дискового пространства: для этого всего лишь нужно активировать механизм автоматической очистки хранилищ данных перед завершением работы веб-браузера Firefox. После этого все куки и история посещения веб-сайтов будут удаляться автоматически. Более того, вы можете ограничить возможности некоторых веб-сайтов, связанные с отслеживанием вашего перемещения по глобальной сети.

Ценой данной оптимизации работы веб-браузера будет незначительное ухудшение его пользовательских качеств, которым можно пренебречь. Ведь значительное улучшение безопасности системы гораздо важнее ухудшения пользовательских качеств приложения, пусть и такого важного, как веб-браузер.

Для того, чтобы включить рассматриваемый механизм, необходимо осуществить переход в рамках меню окна веб-браузера Firefox (которое открывается с помощью клавиши **Alt**) **«Правка — Настройки»** и на открывшейся вкладке перейти в раздел **«Приватность и защита»**. В этом разделе в первую очередь следует найти параметр **«Отправлять веб-сайтам сигнал «Не отслеживать», означающий, чтобы вы не хотите, чтобы вас отслеживали»** и установить его значение **«Всегда»**. Далее следует найти раздел **«История»**, перейти к раскрывающемуся списку **«Firefox:»** и выбрать вариант **«Firefox: будет использовать ваши настройки хранения истории»**. В результате ниже должны быть отображены дополнительные элементы управления. Здесь следует установить флажок **«Удалять историю при закрытии Firefox»**. После этого следует нажать на кнопку **«Параметры...»** возле упомянутого выше флажка и в открывшемся диалоговом окне установить все флажки, кроме **«Настройки сайтов»** и **«Данные автономных веб-сайтов»**. По окончании установки флажков следует нажать кнопку **«OK»**. Теперь следует найти раздел **«Куки и данные сайтов»** и установить флажок **«Удалять куки и данные сайтов при закрытии Firefox»**. На этом этапе можно считать настройку веб-браузера оконченной и закрывать вкладку **«Настройки»**.

***Совет:** в некоторых случаях может оказаться полезной принудительная очистка хранилищ данных веб-браузера в процессе веб-серфинга. После осуществления описанных выше настроек вы можете просто закрыть окно Firefox и запустить веб-браузер снова.*

### 6\. Удаление устаревших версий ядра ОС

В вашей системе могут быть установлены устаревшие версии ядра ОС, которые не используются. В этом случае вы также можете освободить немного дискового пространства.

После обновления компонентов системы файлы старой версии ядра ОС остаются в системе, причем запись, соответствующая старой версии ядра ОС присутствует в меню системного загрузчика GRUB. Это объясняется тем, что вам может понадобиться загрузить систему с ядром ОС старой версии из-за того, что ядро ОС новой версии некорректно работает с вашим аппаратным обеспечением.

В этом нет ничего плохого. Но для хранения файлов более чем одной версии ядра ОС требуется дополнительное дисковое пространство, ведь общий объем файлов каждой версии ядра ОС превышает 200 МБ (включая заголовочные файлы). Благодаря приведенными ниже инструкциями, вы сможете удалить устаревшие версии ядер ОС из своей системы, а также убрать лишние элементы из меню системного загрузчика GRUB.

По умолчанию количество устаревших версий ядра ОС, хранимых в системе, равно трем, причем для того, чтобы изменить это количество достаточно изменить настройки менеджера пакетов DNF. Для этого нужно нажать на кнопку **«Обзор»** на верхней панели, ввести запрос **«терминал»** в поле поиска в верхней части экрана и выбрать первое предложенное приложение **«Терминал»**. С помощью терминала нужно выполнить следующую команду:

`sudo sed -i 's/installonly_limit=3/installonly_limit=2/' /etc/dnf/dnf.conf`

После окончания ввода команды следует нажать клавишу **Enter**. При запросе пароля вы должны будете ввести свой пароль. Символы вашего пароля не будут отображаться никоим образом, даже с помощью точек, и это нормально. После ввода пароля следует снова нажать клавишу **Enter**.

После следующего обновления в системе будут сохранены лишь две версии ядра ОС — текущая и предыдущая.

Для возврата к предыдущей конфигурации менеджера пакетов DNF достатчоно выполнить следующую команду:

`sudo sed -i 's/installonly_limit=2/installonly_limit=3/' /etc/dnf/dnf.conf`

### 7\. Удаление директорий с данными вашего веб-браузера

Объем директории данных вашего веб-браузера Firefox, Chrome или Chromium значительно возрос (что нередко происходит из-за использования специфических, вредоносных или некорректно работающих дополнений) и вы желаете удалить ее и начать работу с браузером с чистого листа? Если это так, вам стоит воспользоваться приведенными ниже инструкциями.

В первую очередь стоит создать резервную копию директории данных веб-браузера (ведь неизвестно, какие данные могут понадобиться вам в будущем). Для этого следует в первую очередь открыть терминал. Используйте функции копирования/вставки для переноса соответствующей команды в окно терминала:

**Для Firefox:** `cp -r ~/.mozilla ~/.mozillabkp`

**Для Chrome:** `cp -r ~/.config/google-chrome ~/.config/google-chromebkp`

**Для Chromium:** `cp -r ~/.config/chromium ~/.config/chromiumbkp`

После вставки команды в окно терминала следует нажать клавишу **Enter** для ее исполнения.

Теперь нужно экспортировать список ваших закладок в отдельный файл.

**Для Firefox:** следует использовать сочетание клавиш **Ctrl + Shift + O** в результате чего откроется окно **«Библиотека»**. В открывшемся окне следует нажать на кнопку **«Импорт и резервные копии»** и выбрать в открывшемся меню пункт **«Создать резервную копию...»**. Вы можете сохранить файл под именем **bookmarks-xxx.json** в любой директории. Впоследствии вы сможете импортировать ваши закладки в веб-браузер Firefox, запущенный в очищенном окружении с помощью пунктов мень **«Восстановить резервную копию от — Выбрать файл...»**.

**Для Chrome/Chromium:** следует нажать на кнопку с тремя полосками в верхнем правом углу окна вашего веб-браузера и в открывшемся меню выбать пункт **«Закладки — Диспетчер закладок»**. После этого на открывшейся вкладке нужно нажать на надпись **«Упорядочить»** и в открывшемся меню выбрать пункт **«Экспорт закладок в файл HTML»**. Впоследствии вы сможете снова импортировать сохраненные закладки в веб-браузер Chrome/Chromium, запущенный в очищенном окружении.

Имейте в виду, что вы также потеряете все сохраненные имена пользователей и пароли для веб-сайтов! Убедитесь в том, что вы хорошо помните их. Теперь вы можете закрыть веб-браузер, окружение которого вы желаете очистить и снова перейдите к окну терминала. После этого можете скопировать и вставить в окно терминала соответствующую команду для удаления директории данных веб-браузера.

**Для Firefox:** `rm -r -v ~/.mozilla && rm -r -v ~/.cache/mozilla`

**Для Chrome:** `rm -r -v ~/.config/google-chrome && rm -r -v ~/.cache/google-chrome`

**Для Chromium:** `rm -r -v ~/.config/chromium && rm -r -v ~/.cache/chromium`

После вставки команды в окно терминала следует также нажать клавишу **Enter** для ее исполнения.

Пришло время снова запустить веб-браузер. Теперь он будет работать в очищенном окружении. Вы можете импортировать в него сохраненные закладки из файла. Это делается с помощью тех же инструментов, которые были использованы ранее для создания резервной копии закладок.

На этом процесс удаления директорий с данными веб-браузера можно считать оконченным. С данного момента постарайтесь избегать сомнительных расширений и дополнений для веб-браузеров и устанавливайте лишь те расширения или дополнения, которые вам действительно нужны и которым вы действительно доверяете.

### 8\. Сокращение объема файла системного журнала

По умолчанию в Fedora Workstation не устанавливается ограничения на объем файла системного журнала. В том случае, если вы давно не переустанавливали систему и не устанавливали ограничений его объема самостоятельно, он может занимать достаточно много дискового пространства. Возможно, в случае сервера и разумно хранить как можно больше системных сообщений, но в случае обычной домашней системы будет вполне достаточно файла системного журнала объемом в 128 Мб. Для сокращения объема существующего файла системного журнала до 128 Мб следует нажать на кнопку **«Обзор»** на верхней панели, ввести запрос **«терминал»** в поле поиска в верхней части экрана и выбрать первое предложенное приложение **«Терминал»**. С помощью терминала нужно выполнить следующую команду:

`sudo journalctl --vacuum-size=128M`

После окончания ввода команды следует нажать клавишу **Enter**. При запросе пароля вы должны будете ввести свой пароль. Символы вашего пароля не будут отображаться никоим образом, даже с помощью точек, и это нормально. После ввода пароля следует снова нажать клавишу **Enter**.

***Примечание:** ограничение объема рассматриваемого файла устанавливается [следующим образом](http://linux-faq.ru/page/10-operaciy-kotorie-sleduet-vypolnit-srazu-je-posle-ustanovki-distributiva-fedora-workstation#journal-size-limit "Ограничение максимального объема файла системного журнала").*

### 9\. Хотите ознакомиться с дополнительными советами?

Хотите узнать о других настройках и приемах работы с дистрибутивом Fedora Workstation? На данном веб-сайте [размещено большое количество подобных материалов](https://linux-faq.ru/page/fedora).

Реклама

Поиск

|     |     |
| --- | --- |
|     |     |

Реклама

* * *

Proudly powered by [e107 Bootstrap CMS](https://e107.org) which is [released](https://linux-faq.ru/credits.php) under the terms of the GNU GPL License.