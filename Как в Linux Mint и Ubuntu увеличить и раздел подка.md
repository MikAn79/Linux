
# Как в Linux Mint и Ubuntu увеличить и раздел подкачки. Как в Linux создать файл подкачки Swap

В этой статье на примере Linux Mint и Ubuntu мы научимся смотреть информацию по разделе подкачки, создавать файл подкачки, а также увеличивать доступное для подкачки место.

Файл подкачки — это определённое место на постоянном хранилище (например, на жёстком диске), куда на время сбрасываются данные, которые не умещаются в оперативную память. То есть это возможность увеличить количество оперативной памяти без покупки модулей ОЗУ. Правда, такая «виртуальная» оперативная память работает медленнее.

Посмотреть текущий размер раздела подкачки можно командой:

`swapon --show` 

[![](https://zalinux.ru/wp-content/uploads/2019/02/swap1.png)](https://zalinux.ru/wp-content/uploads/2019/02/swap1.png)

Либо командой free:
 `free` `-h` 

Либо с помощью [top](https://zalinux.ru/?p=1811):

 `top` 

Как можно увидеть, в системе присутствует файл подкачки размером 2 Гигабайта, что, предположим, недостаточно.

Отключаем и удаляем этот файл подкачки следующими командами:

 `sudo swapoff -a`<br><br>`sudo rm -f /swapfile` 

На диске должно быть достаточно места, чтобы туда поместился файл подкачки того размера, который вы задали.

Для создания файла подкачки размером 8G (измените значение по вашему желанию) выполните команду:

|     |     |
| --- | --- |
| 1   | `sudo` `fallocate -l 8G` `/swapfile` |

Затем выполните команды:

|     |     |
| --- | --- |
| 1<br><br>2<br><br>3 | `sudo` `chmod` `600` `/swapfile`<br><br>`sudo` `mkswap` `/swapfile`<br><br>`sudo` `swapon` `/swapfile` |

Откройте системный монитор, чтобы убедиться, что система видит файл подкачки:

[![](https://zalinux.ru/wp-content/uploads/2019/02/swap2.png)](https://zalinux.ru/wp-content/uploads/2019/02/swap2.png)

Либо это можно сделать командой:

|     |     |
| --- | --- |
| 1   | `swapon --show` |

[![](https://zalinux.ru/wp-content/uploads/2019/02/swap3.png)](https://zalinux.ru/wp-content/uploads/2019/02/swap3.png)

* * *

Вот и всё! Вам даже не нужно перезагружать систему, чтобы изменения вступили в силу.

Кстати, если вы вновь заходите изменить размер файла подкачки (в сторону увеличения или в сторону уменьшения — не важно), то в точности следуйте этой же инструкции ещё раз, но при создании файла подкачки укажите другой размер.

## Как в Linux Mint и Ubuntu удалить файл подкачки

Для полного удаления файла подкачки выполните команды:

|     |     |
| --- | --- |
| 1<br><br>2 | `sudo` `swapoff -a`<br><br>`sudo` `rm` `-f` `/swapfile` |

Затем откройте файл /etc/fstab:

|     |     |
| --- | --- |
| 1   | `sudo` `gedit` `/etc/fstab` |

И удалите из него строку:

* * *

|     |     |
| --- | --- |
| 1   | `/swapfile none swap defaults 0 0` |

## Ошибка «fallocate: fallocate failed: Текстовый файл занят»

Если вы столкнулись с ошибкой:

|     |     |
| --- | --- |
| 1   | `fallocate: fallocate failed: Текстовый файл занят` |

Это означает, что вы хотите создать файл подкачки, но файл с таким именем уже существует и всё ещё используется. На английском ошибка выглядит так: fallocate: fallocate failed: Text file busy.

Для его отключения и удаления выполните команды:

|     |     |
| --- | --- |
| 1<br><br>2 | `sudo` `swapoff -a`<br><br>`sudo` `rm` `-f` `/swapfile` |

## Управление файлами подкачки в других Linux

Для увеличения или создания файла подкачки в других дистрибутивах смотрите статьи:

- [Как в Kali Linux создать или увеличить файл подкачки (Swap)](https://kali.org.ru/main-forum/как-в-kali-linux-создать-или-увеличить-файл-под/)
- [Файл подкачки и раздел подкачки в Arch Linux: что выбрать и как добавить Swap](https://blackarch.ru/?p=1091)

## Как создать раздел подкачки на другом диске

Вам необязательно использовать для свопа именно системный диск, на котором может быть мало место. Вы можете создать раздел на любом диске в системе. Подробности смотрите в инструкции «[Как создать раздел подкачки не на системном диске. Как переместить раздел подкачки на другой диск](https://zalinux.ru/?p=2914)».

## Как проверить использование файла подкачки в Linux

Стресс-тестирование системы в сценарии исчерпания всей оперативной памяти: [Как проверить использование файла подкачки в Linux](https://zalinux.ru/?p=7128)

* * *

## Связанные статьи:

- [Как создать раздел подкачки не на системном диске. Как переместить раздел подкачки на другой диск](https://zalinux.ru/?p=2914) (100%)
- [Как проверить использование файла подкачки в Linux](https://zalinux.ru/?p=7128) (61.3%)
- [Динамические файлы подкачки создаются только когда нужны](https://zalinux.ru/?p=7133) (61.3%)
- [Чем отличается Ждущий режим (Suspend) от Гибернация (Hibernate) в Linux. Почему отсутствует кнопка Гибернация](https://zalinux.ru/?p=7458) (61.3%)
- [Как правильно и навсегда исправить ошибку «E: Не удалось получить доступ к файлу блокировки /var/lib/apt/lists/lock - open (11: Resource temporarily unavailable)»](https://zalinux.ru/?p=1592) (51.8%)
- [Как создать общую директорию для всех пользователей в Linux](https://zalinux.ru/?p=1172) (RANDOM - 13.1%)

## Рекомендуемые статьи:

[← Предыдущая запись](https://zalinux.ru/?p=2382 "Вышла Linux Mint 19.1. Что нового в Linux Mint 19.1")

[Следующая запись →](https://zalinux.ru/?p=2447 "Как отфильтровать текст, находящийся между двумя определёнными строками")

## 15 Комментарии

1.  ![](../_resources/9f22b5ce82433a3d84a3f49d4bffe06e_ee0b156883924176b.jpg)**busuzima** 21.02.2019 в 12:53
    
    Алексей, хотел выразить огромную благодарность за Ваш труд. Мне, как продвинутому новичку в мире Linux и всего, что с ним связано, это очень помогает. Так держать! Спасибо большое!
    
    [Ответить](https://zalinux.ru/?p=2432&replytocom=9124#respond) ↓
    
    1.  ![](../_resources/23ccebf6ce289202897d5694ef4ca46f_90a600ca8b3a4b9c8.jpg)**Alexey** (Автор записи)21.02.2019 в 13:39
        
        Спасибо за добрые слова.
        
        [Ответить](https://zalinux.ru/?p=2432&replytocom=9125#respond) ↓
        
2.  ![](../_resources/9d97d2c0f0d9c3b4adee99f8c16cf2e3_fd1c465ad4ef4b419.jpg)**Luk** 20.04.2019 в 15:35
    
    Спасибо! Толково все изложено. Мне помогло)
    
    [Ответить](https://zalinux.ru/?p=2432&replytocom=9651#respond) ↓
    
3.  ![](../_resources/50a3494db70cd56e9d18ed92433f65da_112d18156016403fa.jpg)**Виктор** 10.11.2019 в 21:42
    
    Большое спасибо!
    
    [Ответить](https://zalinux.ru/?p=2432&replytocom=12205#respond) ↓
    
4.  ![](../_resources/858e81337b8d6182a6f73cb973a18689_d051f0c919dc44db9.jpg)**Валентин** 21.12.2019 в 13:08
    
    При запуске GIMP появляются такие сообщения;"Невозможно открыть тестовый файл подкачки.Чтобы избежать потери данных, проверьте в настройках расположение файла подкачки и права на него. (сейчас "/home/val/.gimp-2.8").
    
    Невозможно открыть файл подкачки. GIMP использовал всю доступную оперативную память и не может использовать файл подкачки. Некоторые части ваших изображений могут оказаться поврежденными. Сохраните файлы под другими именами, перезапустите GIMP и проверьте путь к файлу подкачки в параметрах программы."
    Куда копать, что изменить, ОС LM 19,2 x64
    
    <img width="930" height="523" src="../_resources/2019-12-2021-51-48_93a886d65e554787bd62d200a663f81.png"/>
    
    [Ответить](https://zalinux.ru/?p=2432&replytocom=12950#respond) ↓
    
    1.  ![](../_resources/23ccebf6ce289202897d5694ef4ca46f_90a600ca8b3a4b9c8.jpg)**Alexey** (Автор записи)22.12.2019 в 03:57
        
        Приветствую!
        
        Суть ошибки в том, что:
        
        1.  Закончилась оперативная память во время работы GIMP и, видимо, системный файл подкачки тоже закончился, если он есть
        2.  Закончилось место на диске, либо неправильно выставлены права на файлы подкачки самой программы GIMP, которые она хранит на диске.
        
        Если вы много работаете с большими изображениями, то самый лучший вариант — это установить в компьютер больше оперативной памяти.
        
        Если такой возможности нет, то увеличьте размер файла подкачки, как показано в инструкции на этой странице.
        
        Если на диске действительно закончилось место, то:
        
        а) очистите диск
        
        б) укажите другую папку подкачки GIMP, для этого в меню GIMP перейдите в **Правка → Параметры → Каталоги**. Там установите значения для «**Папка для временных файлов**» и «**Папка для подкачки**»:
        
        [![](https://zalinux.ru/wp-content/uploads/2019/12/gimp.png)](https://zalinux.ru/wp-content/uploads/2019/12/gimp.png)
        
        Если даже это невозможно, то в разделе «**Системные ресурсы**», уменьшите значения для «**Максимальная память для отмены**», «**Размер кэша**», а для «**Сжатие файла подкачки**» выберите «**Лучшее сжатие**»:
        
        [![](https://zalinux.ru/wp-content/uploads/2019/12/gimp-2.png)](https://zalinux.ru/wp-content/uploads/2019/12/gimp-2.png)
        
        [Ответить](https://zalinux.ru/?p=2432&replytocom=12959#respond) ↓
        
        1.  ![](../_resources/858e81337b8d6182a6f73cb973a18689_d051f0c919dc44db9.jpg)**Валентин** 22.12.2019 в 11:37
            
            Alexey, спасибо за ответ, но пока ничего не получается. Выкладываю скрины, что выдает система.
            
            <img width="790" height="444" src="../_resources/2019-12-2113-55-34_7abce9e8c4c349a4b7525d2298d709f.png"/>
            
            <img width="790" height="444" src="../_resources/2019-12-2113-56-28_a2cda6a3488245d3a4ec7f7ba79c9c2.png"/>
            
            <img width="790" height="444" src="../_resources/2019-12-2211-13-01_421d94d8687b404bb19dc24d188e6fe.png"/>
            
            <img width="790" height="444" src="../_resources/2019-12-2211-24-37_75633112a22e462fa7ceccd02f06da9.png"/>
            
            <img width="790" height="444" src="../_resources/2019-12-2211-25-04_dd797b95b35f4816a85c48169de8cec.png"/>
            
            <img width="790" height="444" src="../_resources/2019-12-2211-25-29_cb0cdfce32104b6c974e4f4793143ce.png"/>
            
            <img width="790" height="444" src="../_resources/2019-12-2211-26-46_6d9cb8421c274bceb2fd464ae3e8963.png"/>
            
            <img width="790" height="444" src="../_resources/2019-12-2211-27-31_4a8704776bc446b68a652dc7f3dae23.png"/>
            
            [Ответить](https://zalinux.ru/?p=2432&replytocom=12964#respond) ↓
            
            1.  ![](../_resources/23ccebf6ce289202897d5694ef4ca46f_90a600ca8b3a4b9c8.jpg)**Alexey** (Автор записи)22.12.2019 в 11:49
                
                На одном из скриншотов видно, что не удаётся создать файл **gimprc**, поскольку отказано в доступе.
                
                Проверьте, существует ли папка **~/.gimp-2.8/** и какие у неё права доступа:
                
                |     |     |
                | --- | --- |
                | 1   | `ls` `-l ~/.gimp-2.8/` |
                
                Правильно ли я понимаю, что ваша домашняя папка это **/home/val**, а имя пользователя **val**?
                
                То есть всё дело в правах доступа на папку **~/.gimp-2.8/** \- или у вас нет прав на эту папку, либо нет самой этой папки или что-то похожее. Можно попробовать указать в качестве временного каталога и каталога подкачки какую-нибудь папку, на которую у вас точно есть права доступа.
                
                [Ответить](https://zalinux.ru/?p=2432&replytocom=12965#respond) ↓
                
                1.  ![](../_resources/858e81337b8d6182a6f73cb973a18689_d051f0c919dc44db9.jpg)**Валентин** 22.12.2019 в 16:29
                    
                    Папка существует, права есть… Нет времени разбираться с проблемой (срочно нужно обработать десяток фотографий), сейчас переустановлю систему, быстрей получится. Спасибо за участие! С наступащим НГ, успехов, благополучия!
                    
                    [Ответить](https://zalinux.ru/?p=2432&replytocom=12968#respond) ↓
                    
5.  ![](../_resources/f1c824f52401489941ad613d4e869811_61a8e460b135450fb.jpg)**Сабит** 27.05.2020 в 06:25
    
    Такой вопрос. По инструкций делал все было норм, но после перезагрузки вернулись исходные значения. Это говорит о том, что я где то не так сделал или же всегда после перезагрузки нужно обновлять размер памяти выделяемой?
    
    [Ответить](https://zalinux.ru/?p=2432&replytocom=15153#respond) ↓
    
    1.  ![](../_resources/23ccebf6ce289202897d5694ef4ca46f_90a600ca8b3a4b9c8.jpg)**Alexey** (Автор записи)27.05.2020 в 07:26
        
        После перезагрузки изменения должны сохраняться.
        
        Обратите внимание, что информация о файле подкачки хранится в файле **/etc/fstab**, но в данной инструкции мы НЕ редактируем этот файл (не добавляем информацию о файле подкачки) по той причине, что в Linux Mint и Ubuntu эта запись уже есть. Данная инструкция, кстати, называется «Как в Linux Mint и Ubuntu увеличить и раздел подкачки» и предназначена для этих двух дистрибутивов.
        
        Возможно, у вас другой дистрибутив и просто нужно добавить запись в файл **/etc/fstab** чтобы автоматически использовался файл подкачки. О том, как это сделать, можете посмотреть в статье «[Как в Kali Linux создать или увеличить файл подкачки (Swap)](https://kali.org.ru/main-forum/%D0%BA%D0%B0%D0%BA-%D0%B2-kali-linux-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C-%D0%B8%D0%BB%D0%B8-%D1%83%D0%B2%D0%B5%D0%BB%D0%B8%D1%87%D0%B8%D1%82%D1%8C-%D1%84%D0%B0%D0%B9%D0%BB-%D0%BF%D0%BE%D0%B4/)».
        
        [Ответить](https://zalinux.ru/?p=2432&replytocom=15154#respond) ↓
        
6.  ![](../_resources/9c6498aa66e5fc3440a5f95109b57399_660627c66eb042efb.jpg)**Павел** 17.07.2020 в 19:20
    
    На вашем скрине и у меня на практике после данных действий файл подкачки не задействуется. там так и видно, что кол\-во задействованного места \- 0\. В чем причина и как её решить?
    
    [Ответить](https://zalinux.ru/?p=2432&replytocom=15992#respond) ↓
    
    1.  ![](../_resources/23ccebf6ce289202897d5694ef4ca46f_90a600ca8b3a4b9c8.jpg)**Alexey** (Автор записи)17.07.2020 в 19:40
        
        Приветствую! Файл подкачки будет задействован когда закончится физическая память. На моём скрине видно, что задействовано только 14 процентов физической памяти. По этой причине файл подкачки в момент снятия скрина просто не нужен.
        
        У вас точно израсходована физическая память?
        
        Установите **stress-ng** и запустите что-нибудь такое:
        
        |     |     |
        | --- | --- |
        | 1   | `stress-ng --vm-bytes $(``awk` `'/MemAvailable/{printf "%d\n", $2 * 1.1;}'` `<` `/proc/meminfo``)k --vm-keep -m 1` |
        
        И понаблюдайте за расходом памяти — увидите, как начнёт использоваться файл подкачки.
        
        [![](https://zalinux.ru/wp-content/uploads/2020/07/swap.png)](https://zalinux.ru/wp-content/uploads/2020/07/swap.png)
        
        [Ответить](https://zalinux.ru/?p=2432&replytocom=15993#respond) ↓
        
7.  ![](../_resources/82b44ea567ec0c16218f13e4deec0bb6_395b329af35741b6b.jpg)**Юрий** 31.10.2021 в 11:19
    
    yuriy@Aspire-5742G:~$ sudo chmod 600 /swapfile
    yuriy@Aspire-5742G:~$ mkswap /swapfile
    mkswap: невозможно открыть /swapfile: Отказано в доступе
    
    Здравсвуйте!! А что делать дальше?
    
    [Ответить](https://zalinux.ru/?p=2432&replytocom=23990#respond) ↓
    
    1.  ![](../_resources/23ccebf6ce289202897d5694ef4ca46f_90a600ca8b3a4b9c8.jpg)**Alexey** (Автор записи)31.10.2021 в 11:25
        
        Здравствуйте, а дальше как в инструкции: там «**sudo mkswap /swapfile**», там нет «**mkswap /swapfile**».
        
        [Ответить](https://zalinux.ru/?p=2432&replytocom=23992#respond) ↓
        

### Оставить комментарий

<a id="email-notes"></a>Ваш адрес email не будет опубликован. Обязательные поля помечены *

<a id="cke_1_top"></a><a id="cke_1_toolbox"></a><a id="cke_14"></a>

<a id="cke_15"></a><a id="cke_15_label"></a>Источник

<a id="cke_62"></a>

<a id="cke_11"></a><a id="cke_11_text"></a>Форматирование<a id="cke_12"></a><a id="cke_12_text"></a>Шрифт<a id="cke_13"></a><a id="cke_13_text"></a>Размер

<a id="cke_1_bottom"></a><a id="cke_1_resizer"></a>◢

Получать новые комментарии по электронной почте. Вы можете [подписаться](https://zalinux.ru/?page_id=99999&srp=2432&srk=7555514c595eaeea765af8d16e08234d&sra=s&srsrc=f) без комментирования.

Выберите изображение для вашего комментария (GIF, PNG, JPG, JPEG):

* * *

Рекомендуется вам:

Поиск

Свежие записи

- [Как установить Viber на Linux \[обновлено 2023\]](https://zalinux.ru/?p=2163)
- [Как обновить загрузчик GRUB в Debian и производных дистрибутивах (Kali Linux, Ubuntu, Linux Mint)](https://zalinux.ru/?p=8220)
- [Обновление пакетов: обновлять ли конфигурационный файл](https://zalinux.ru/?p=6459)
- [Ошибка «No such file or directory: AH02454: FCGI: attempt to connect to Unix domain socket /run/php/php8.1-fpm.sock (*:80) failed» (РЕШЕНО)](https://zalinux.ru/?p=8206)
- [Ошибка «Initramfs unpacking failed: invalid magic at start of compressed archive» (РЕШЕНО)](https://zalinux.ru/?p=8187)

Свежие комментарии

- Lookings к записи [Ошибка VirtualBox «NS\_ERROR\_FAILURE (0x80004005)» (РЕШЕНО)](https://zalinux.ru/?p=7643#comment-30071)
- Alexey к записи [Операторы перенаправления вывода в Bash](https://zalinux.ru/?p=3934#comment-30048)
- Андрей к записи [Операторы перенаправления вывода в Bash](https://zalinux.ru/?p=3934#comment-30045)
- Евгений к записи [Как исправить ошибку ‘No Space Left on Device’ (на устройстве не осталось места) на Linux, когда свободное место на самом деле есть](https://zalinux.ru/?p=3001#comment-30022)
- Alexey к записи [Какие файлы можно удалить при нехватке места на диске Linux](https://zalinux.ru/?p=3047#comment-29968)

Рубрики

- [CentOS](https://zalinux.ru/?cat=16)
- [PHP](https://zalinux.ru/?cat=114)
- [Python](https://zalinux.ru/?cat=86)
- [Ruby](https://zalinux.ru/?cat=148)
- [Ubuntu](https://zalinux.ru/?cat=81)
- [VirtualBox](https://zalinux.ru/?cat=104)
- [Безопасность](https://zalinux.ru/?cat=21)
- [Веб](https://zalinux.ru/?cat=156)
- [Веб-сервер](https://zalinux.ru/?cat=115)
- [Для новичков](https://zalinux.ru/?cat=3)
- [Железо](https://zalinux.ru/?cat=24)
- [Запуск Windows-программ на Linux](https://zalinux.ru/?cat=36)
- [Мультимедиа](https://zalinux.ru/?cat=194)
- [Новости](https://zalinux.ru/?cat=166)
- [Обработка текста в консоли и консольные текстовые редакторы](https://zalinux.ru/?cat=314)
- [Офисные программы](https://zalinux.ru/?cat=285)
- [Производительность труда](https://zalinux.ru/?cat=84)
- [Разработка](https://zalinux.ru/?cat=164)
- [Сеть](https://zalinux.ru/?cat=83)
- [Система](https://zalinux.ru/?cat=25)
- [Системное администрирование](https://zalinux.ru/?cat=31)
- [Утилиты](https://zalinux.ru/?cat=2)
- [Файловая система](https://zalinux.ru/?cat=20)
- [Ядро](https://zalinux.ru/?cat=80)

Новости друзей

- [Как предотвратить потерю денег в международном роуминге. Настройка телефона для работы в международном роуминге](https://zawindows.ru/%D0%BA%D0%B0%D0%BA-%D0%BF%D1%80%D0%B5%D0%B4%D0%BE%D1%82%D0%B2%D1%80%D0%B0%D1%82%D0%B8%D1%82%D1%8C-%D0%BF%D0%BE%D1%82%D0%B5%D1%80%D1%8E-%D0%B4%D0%B5%D0%BD%D0%B5%D0%B3-%D0%B2-%D0%BC%D0%B5%D0%B6%D0%B4/)
    
    Источник: zaWindows.ru Дата: 2023-03-05
    
- [Как обновить загрузчик GRUB](https://blackarch.ru/?p=1543)
    
    Источник: BlackArch.ru Дата: 2023-02-06
    
- [Ошибка «error: failed to commit transaction (invalid or corrupted package)» (РЕШЕНО)](https://blackarch.ru/?p=1534)
    
    Источник: BlackArch.ru Дата: 2022-12-07
    
- [Ошибка «TypeError: ‘AURPackageInfo’ does not have attribute ‘submitter’» (РЕШЕНО)](https://blackarch.ru/?p=1525)
    
    Источник: BlackArch.ru Дата: 2022-12-05
    
- [Ошибка ImageMagick в Windows: «magick: unable to open image »test’: No such file or directory @ error/blob.c/OpenBlob/3565. magick: no decode delegate for this image format `’ @ error/constitute.c/ReadImage/741.» (РЕШЕНО)](https://zawindows.ru/%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B0-imagemagick-%D0%B2-windows-magick-unable-to-open-image-test-no-such-file-or-directory-error-blob-c-openblob-3565-magick-no-decode-delegate-for-t/)
    
    Источник: zaWindows.ru Дата: 2022-11-03
    
- [Фильтрация свойств объектов в PowerShell](https://pwsh.ru/%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D1%81%D0%B2%D0%BE%D0%B9%D1%81%D1%82%D0%B2-%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D0%BE%D0%B2-%D0%B2-powershell/)
    
    Источник: Уроки по PowerShell Дата: 2022-10-31
    
- [Как поменять заголовок столбца в выводе PowerShell. Как поменять ширину и выравнивание в таблицах](https://pwsh.ru/%D0%BA%D0%B0%D0%BA-%D0%BF%D0%BE%D0%BC%D0%B5%D0%BD%D1%8F%D1%82%D1%8C-%D0%B7%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BE%D0%BA-%D1%81%D1%82%D0%BE%D0%BB%D0%B1%D1%86%D0%B0-%D0%B2-%D0%B2%D1%8B%D0%B2%D0%BE/)
    
    Источник: Уроки по PowerShell Дата: 2022-10-30