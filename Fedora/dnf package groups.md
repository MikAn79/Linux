## Что такое группа пакетов?

Давайте начнем с определения того, что такое группа пакетов. Группа пакетов - это, по сути, “виртуальный” пакет. Здесь мы называем это “виртуальным”, потому что оно не предоставляет конкретного программного обеспечения как такового, но ссылается на другие “реальные” пакеты. Мы можем  
использовать группы пакетов для установки “набора” пакетов с помощью одной команды. Скажем, например, нам нужно установить пакеты, необходимые для работы с [виртуальные машины kvm](https://linuxconfig.org/how-to-create-and-manage-kvm-virtual-machines-from-cli) в Fedora: вместо того, чтобы устанавливать каждый пакет отдельно, мы можем просто установить группу пакетов “виртуализация”, что приведет к установке всего необходимого программного обеспечения в нашей системе.

## Получение информации о группе пакетов

Перед установкой группы пакетов мы можем захотеть посмотреть, какие пакеты будут подключены к ней. Для выполнения этой задачи все, что нам нужно сделать, это использовать `dnf group info` команда, передающая имя группы пакетов, которую мы хотим проверить, в качестве аргумента. Чтобы увидеть, что содержат, например, группы пакетов `@virtualization` , мы запустили бы:

```
$ dnf group info virtualization
```

* * *

* * *

Вот результат выполнения приведенной выше команды в системе Fedora 34:

```
Группа: Виртуализация
 Описание: Эти пакеты предоставляют графическую среду виртуализации.
 Обязательные пакеты:
 virt-install
 Пакеты по умолчанию:
 libvirt-daemon-config-network 
 libvirt-daemon-kvm
 qemu-kvm
 virt-manager 
 virt-viewer
 Дополнительные пакеты:
 libguestfs-инструменты 
 python3-libguestfs 
 virt-top
```

Мы можем увеличить детализацию команды и получить более подробную информацию, вызвав ее с помощью опции `-v` (сокращение от `--verbose`):

```
Группа: Виртуализация
 Идентификатор группы: виртуализация
 Описание: Эти пакеты предоставляют графическую среду виртуализации.
 Обязательные пакеты:
 virt-install-3.2.0-3.fc34.noarch @System
 Пакеты по умолчанию:
 libvirt-daemon-config-network-7.0.0-4.fc34.x86_64 @System 
 libvirt-daemon-kvm-7.0.0-4.fc34.x86_64 @System
 qemu-kvm-2: 5.2.0-7.fc34.x86_64 @Система 
 virt-manager-3.2.0-3.fc34.noarch @Система 
 virt-viewer-9.0-3.fc34.x86_64 @System
 Дополнительные пакеты:
 libguestfs-инструменты 
 обновления python3-libguestfs-1:1.45.4-1.fc34.x86_64 
 virt-top-1.0.9-17.fc34.x86_64 fedora
```

Первое, что мы можем заметить в выходных данных, это **Имя** и **ID** группы пакетов, в данном случае ”Виртуализация“ и ”virtualization" соответственно. После них мы можем прочитать краткое **Описание** о группе пакетов и ее назначении,  
и, наконец, фактический список пакетов, включенных в нее. Мы видим, что пакеты разделены на три основных раздела:

- Обязательно
- По умолчанию
- Необязательно

Пакеты, помеченные как “Обязательные” и “По умолчанию”, будут **всегда** устанавливаться, в то время как пакеты, помеченные как “Необязательные”, будут устанавливаться только в том случае, если они указаны. Для полноты картины следует упомянуть, что существует другой раздел, который в данном случае не используется: **Условно**. Пакеты, входящие в раздел “Условно”, устанавливаются только в том случае, если требуемые для них пакеты уже установлены.

* * *

* * *

В определенных случаях некоторые пакеты, входящие в группу пакетов, могут уже присутствовать в системе. Когда мы запускаем `group info` команду с `-v` опция, как мы делали выше, пакеты, входящие в группу и еще не установленные, будут легко различимы, поскольку они будут выделены в списке. Вот вывод команды `dnf -v group info virtualization` после команды `virt-viewer` пакет был установлен отдельно:

\](https://linuxconfig.org/wp-content/uploads/2021/06/01-how-to-work-with-dnf-package-groups.avif "информация о группе dnf -v виртуализация")

`dnf -v group info virtualization` вывод команды

## Перечислите все доступные группы пакетов

Чтобы составить список всех доступных групп пакетов в репозиториях нашего дистрибутива, все, что нам нужно сделать, это запустить следующую команду:

```
dnf group list
```

Приведенная выше команда возвращает список всех известных групп. Однако мы можем добавить ряд опций для изменения ее поведения. По умолчанию так называемые **скрытые группы** не включены в список. Чтобы сделать их все мы  
нужно сделать, это добавить `--hidden` параметр:

```
dnf group list --hidden
```

Если мы хотим только, чтобы получить список всех **установлен** группы пакетов, вместо этого, мы можем использовать `--installed` параметр:

```
dnf group list --installed
```

## Установка, обновление и удаление группы пакетов

Итак, как мы можем установить группу пакетов? Есть два основных способа: мы можем указать имя пакета с префиксом символа `@` или использовать команду `dnf group install` , как мы уже видели. Приведенные ниже команды эквивалентны:

```
sudo dnf install @virtualization
```

```
sudo dnf group install virtualization
```

Как мы уже говорили, по умолчанию устанавливаются только пакеты “Обязательный” и “По умолчанию". Однако это поведение по умолчанию можно изменить с помощью параметра `group_package_types` dnf либо из командной строки, либо в dnf  
файл конфигурации. Давайте приведем пример. Предположим, мы хотим установить только пакеты, которые являются частью “Обязательного” раздела группы пакетов, мы могли бы запустить следующую команду:

```
$ sudo dnf --setopt=group_package_types="mandatory" group install Virtualization
```

* * *

* * *

Если мы не хотим указывать параметр каждый раз при запуске команды, мы можем установить его постоянно в файле конфигурации dnf, `/etc/dnf/dnf.conf`:

```
[main]
# Install only Mandatory packages from package groups
group_package_types=mandatory
```

Если мы просто хотим, чтобы были включены пакеты, включенные в раздел “Необязательно” группы пакетов, мы также могли бы просто добавить флаг командной строки `--with-optional` при установке группы пакетов:

```
$ sudo dnf group install --with-optional virtualization
```

У нас также может быть возможность **Обновление** группа пакетов. Когда мы сделаем это, все пакеты, входящие в группу, будут обновлены вместе с самой группой пакетов: это потенциально может привести к установке новых пакетов  
если они были добавлены в группу или удалены, если они больше не являются частью группы и не были явно установлены пользователем. Для обновления группы пакетов мы используем команду `group upgrade` , так, например,  
чтобы обновить пакет “Виртуализация”, мы запустили бы:

```
$ sudo dnf group upgrade virtualization
```

Dnf также предоставляет команду для **удаления** установленной группы пакетов: `group remove`. Команда удалит **ВСЕ** пакеты, входящие в группу операционной системы, за исключением пакетов, входящих в другую группу пакетов, или тех, которые явно установлены пользователем. Чтобы удалить группу пакетов “Виртуализация”, мы запустили бы:

```
$ sudo dnf group remove virtualization
```